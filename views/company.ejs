<!DOCTYPE html>
<html lang="en">
  <%- include("./partials/head.ejs") %>
  <body>
    <%- include("./partials/nav.ejs") %>
    <div class="design">
      <h2>Name: <%=company.name%></h2>
      <p>Address: <%=company.address%></p>
      <br />
      <p>Phone: <%=company.phone%></p>
      <br />
      <p>Email: <%=company.email%></p>
      <br />
      <p>BIN: <%=company.BIN%></p>
      <br />
      <p>ID: <%=company.ID%></p>
      <br />
      <p>Pass: <%=company.pass%></p>
      <br />
      <p>Circle: <%=company.circle%></p>
      <br />
      <p>type: <%=company.type%></p>
      <br />
    </div>
    <div class="bcb">
      <a href="/summery/all/<%=company._id%>">View Summeries</a>
      <a class="delete" data-company-id="<%=company._id%>">Delete</a>
      <a class="edit" data-company-id="<%=company._id%>">Edit</a>
    </div>
    <%- include("./partials/footer.ejs") %>
    <script>
      const deleteBtn = document.querySelector("a.delete");
      const editBtn = document.querySelector("a.edit");

      deleteBtn.addEventListener("click", (e) => {
        const endpoint = `/company/${deleteBtn.dataset.companyId}`;
        fetch(endpoint, {
          method: "DELETE",
        })
          .then((response) => {
            response.json();
          })
          .then((data) => {
            window.location.href = data.redirect;
          })
          .catch((err) => {
            console.log(err);
          });
      });

      editBtn.addEventListener("click", (e) => {
        const endpoint = `/company/${deleteBtn.dataset.companyId}`;
        fetch(endpoint, {
          method: "PUT",
        })
          .then((response) => {
            response.json();
          })
          .then((data) => {
            console.log(data);
          })
          .catch((err) => {
            console.log(err);
          });
      });
    </script>
  </body>
</html>
